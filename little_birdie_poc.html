<!doctype html>
<html lang="en">
<head>
  <script>
!function(t,e,n,s,a,c,i,o,p){t.AppsFlyerSdkObject=a,t.AF=t.AF||function(){(t.AF.q=t.AF.q||[]).push([Date.now()].concat(Array.prototype.slice.call(arguments)))},t.AF.id=t.AF.id||i,t.AF.plugins={},o=e.createElement(n),p=e.getElementsByTagName(n)[0],o.async=1,o.src="https://websdk.appsflyer.com?"+(c.length>0?"st="+c.split(",").sort().join(",")+"&":"")+(i.length>0?"af_id="+i:""),p.parentNode.insertBefore(o,p)}(window,document,"script",0,"AF","banners",{banners: {key: "264455aa-2b0b-41f7-9869-93fe9a92aabc"}});
AF('banners', 'showBanner')
</script>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://appsflyersdk.github.io/appsflyer-onelink-smart-script/examples/style_test_page.css">
  <title>Little Birdie Demo</title>
</head>
<body>
  <div class="header">
      <div class="header-container">
        <img src="https://appsflyersdk.github.io/appsflyer-onelink-smart-script/examples/images/AF_LOGO.svg" alt="logo" class="logo">
      </div>
  </div>
  <div class="container">
      <h1 class="title"> Smart Script test page </h1>
      <section class="shadow-box">
        <div>
          <h4>Incoming URL</h4>
          <textarea id="input_url" class="incoming"></textarea>
        </div>
        <br>
        <div>
          <h4>Incoming URL Query Params</h4>
          <textarea id="input_params" class="incoming"></textarea>
        </div>
      </section>

      <section class="shadow-box">
        <div class="output_url-container">
          <h4>Outgoing URL generated by Smart Script</h4>
          <div style="word-break: break-all;"><a id="output_url" href=""></a></div>
        </div>
        <br>
        <div class="output_url-container">
          <h4>QR Code generated by Smart Script</h4>
          <div id="my_qr_code_div_id"></div>
        </div>
      </section>
  </div>


  <script type="text/javascript" src="https://onelinksmartscript.appsflyer.com/onelink-smart-script-latest.js"></script>
  <script type="text/javascript">
   //Initializing Smart Script arguments
    var oneLinkURL = "https://onelink-sim.onelink.me/coiD";
    var mediaSource = {keys:["utm_source"],defaultValue:"no_utm"};
    var deepLinkValue = {defaultValue:"apples"};
    var custom_ss_ui = {paramKey:"af_ss_ui",defaultValue:"true"};

    //Call the function after embedding the code through a global parameter on the window object called window.AF_SMART_SCRIPT.
    //Onelink URL is generated.
    var result = window.AF_SMART_SCRIPT.generateOneLinkURL({
        oneLinkURL: oneLinkURL,
        afParameters: {
            mediaSource: mediaSource,
            deepLinkValue: deepLinkValue,
            afCustom: [
               custom_ss_ui
          ]
        }
    });

      
    var result_url = "No output from script"
    if (result) {
      qry_parmas = window.location.href.split('?')[1];
      result_url = result.clickURL + "&deep_link_sub1=" + encodeURIComponent(qry_parmas);         
      document.getElementById('input_url').innerHTML = window.location.href;
      document.getElementById('input_params').innerHTML = qry_parmas;
      document.getElementById('output_url').href = result_url;
      document.getElementById('output_url').innerHTML = result_url;
      new QRCode(document.getElementById("my_qr_code_div_id"), result_url);
    }      
  </script>
</body>


</html>
